"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/share/resolve";
exports.ids = ["pages/api/share/resolve"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fshare%2Fresolve&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fshare%2Fresolve.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fshare%2Fresolve&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fshare%2Fresolve.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_share_resolve_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/share/resolve.js */ \"(api)/./pages/api/share/resolve.js\");\n// @ts-ignore this need to be imported from next/dist to be external\n\n\n\nconst PagesAPIRouteModule = next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule;\n// Import the userland code.\n// @ts-expect-error - replaced by webpack/turbopack loader\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_share_resolve_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_share_resolve_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/share/resolve\",\n        pathname: \"/api/share/resolve\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_share_resolve_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNoYXJlJTJGcmVzb2x2ZSZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGc2hhcmUlMkZyZXNvbHZlLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBO0FBQzBGO0FBQzNCO0FBQ0w7QUFDMUQsNEJBQTRCLGdIQUEwQjtBQUN0RDtBQUNBO0FBQ3lEO0FBQ3pEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx3REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsd0RBQVE7QUFDcEM7QUFDTztBQUNQO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhcnR1cC12YXVsdC8/MjcxNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtaWdub3JlIHRoaXMgbmVlZCB0byBiZSBpbXBvcnRlZCBmcm9tIG5leHQvZGlzdCB0byBiZSBleHRlcm5hbFxuaW1wb3J0ICogYXMgbW9kdWxlIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbmNvbnN0IFBhZ2VzQVBJUm91dGVNb2R1bGUgPSBtb2R1bGUuUGFnZXNBUElSb3V0ZU1vZHVsZTtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbi8vIEB0cy1leHBlY3QtZXJyb3IgLSByZXBsYWNlZCBieSB3ZWJwYWNrL3R1cmJvcGFjayBsb2FkZXJcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zaGFyZS9yZXNvbHZlLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2hhcmUvcmVzb2x2ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NoYXJlL3Jlc29sdmVcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fshare%2Fresolve&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fshare%2Fresolve.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./crypto.js":
/*!*******************!*\
  !*** ./crypto.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptText: () => (/* binding */ decryptText),\n/* harmony export */   encryptText: () => (/* binding */ encryptText)\n/* harmony export */ });\n// AES-256-GCM encryption using Web Crypto (runs in Node 19+/modern browsers)\n// Key material is derived from process.env.SECRET_ENCRYPTION_KEY (base64 or utf-8)\nconst ENC_ALGO = \"AES-GCM\";\nconst IV_LENGTH = 12; // 96-bit IV for GCM\nfunction getRawKeyBytes() {\n    const key = process.env.SECRET_ENCRYPTION_KEY || \"dev-insecure-key-change-me\";\n    try {\n        // try base64 decode first\n        return Buffer.from(key, \"base64\");\n    } catch (e) {\n        return Buffer.from(key, \"utf-8\");\n    }\n}\nasync function importAesKey() {\n    const webcrypto = getCrypto();\n    const raw = getRawKeyBytes();\n    const raw32 = raw.length === 32 ? raw : Buffer.concat([\n        raw,\n        Buffer.alloc(Math.max(0, 32 - raw.length))\n    ]).slice(0, 32);\n    return webcrypto.subtle.importKey(\"raw\", raw32, ENC_ALGO, false, [\n        \"encrypt\",\n        \"decrypt\"\n    ]);\n}\nfunction getCrypto() {\n    if (false) {}\n    // eslint-disable-next-line no-undef\n    return globalThis.crypto || (__webpack_require__(/*! crypto */ \"crypto\").webcrypto);\n}\nasync function encryptText(plain) {\n    if (plain == null) return \"\";\n    const webcrypto = getCrypto();\n    const iv = webcrypto.getRandomValues(new Uint8Array(IV_LENGTH));\n    const key = await importAesKey();\n    const enc = new TextEncoder().encode(String(plain));\n    const cipherBuf = await webcrypto.subtle.encrypt({\n        name: ENC_ALGO,\n        iv\n    }, key, enc);\n    const out = Buffer.concat([\n        Buffer.from(iv),\n        Buffer.from(new Uint8Array(cipherBuf))\n    ]).toString(\"base64\");\n    return out;\n}\nasync function decryptText(cipher) {\n    if (!cipher) return \"\";\n    const webcrypto = getCrypto();\n    // Tolerate legacy plaintext values (not base64 or too short)\n    let raw;\n    try {\n        raw = Buffer.from(cipher, \"base64\");\n    } catch  {\n        return cipher;\n    }\n    if (!raw || raw.length <= IV_LENGTH) {\n        // Not in expected IV||ciphertext format; likely plaintext\n        return cipher;\n    }\n    const iv = raw.subarray(0, IV_LENGTH);\n    const data = raw.subarray(IV_LENGTH);\n    const key = await importAesKey();\n    const plainBuf = await webcrypto.subtle.decrypt({\n        name: ENC_ALGO,\n        iv\n    }, key, data);\n    return new TextDecoder().decode(plainBuf);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jcnlwdG8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSw2RUFBNkU7QUFDN0UsbUZBQW1GO0FBRW5GLE1BQU1BLFdBQVc7QUFDakIsTUFBTUMsWUFBWSxJQUFJLG9CQUFvQjtBQUUxQyxTQUFTQztJQUNQLE1BQU1DLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MscUJBQXFCLElBQUk7SUFDakQsSUFBSTtRQUNGLDBCQUEwQjtRQUMxQixPQUFPQyxPQUFPQyxJQUFJLENBQUNMLEtBQUs7SUFDMUIsRUFBRSxPQUFPTSxHQUFHO1FBQ1YsT0FBT0YsT0FBT0MsSUFBSSxDQUFDTCxLQUFLO0lBQzFCO0FBQ0Y7QUFFQSxlQUFlTztJQUNiLE1BQU1DLFlBQVlDO0lBQ2xCLE1BQU1DLE1BQU1YO0lBQ1osTUFBTVksUUFBUUQsSUFBSUUsTUFBTSxLQUFLLEtBQUtGLE1BQU1OLE9BQU9TLE1BQU0sQ0FBQztRQUFDSDtRQUFLTixPQUFPVSxLQUFLLENBQUNDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHLEtBQUtOLElBQUlFLE1BQU07S0FBRyxFQUFFSyxLQUFLLENBQUMsR0FBRTtJQUNqSCxPQUFPVCxVQUFVVSxNQUFNLENBQUNDLFNBQVMsQ0FBQyxPQUFPUixPQUFPZCxVQUFVLE9BQU87UUFBQztRQUFXO0tBQVU7QUFDekY7QUFFQSxTQUFTWTtJQUNQLElBQUksS0FBc0RTLEVBQUUsRUFBcUI7SUFDakYsb0NBQW9DO0lBQ3BDLE9BQU9JLFdBQVdELE1BQU0sSUFBSUUsdURBQTJCO0FBQ3pEO0FBRU8sZUFBZUMsWUFBWUMsS0FBSztJQUNyQyxJQUFJQSxTQUFTLE1BQU0sT0FBTztJQUMxQixNQUFNakIsWUFBWUM7SUFDbEIsTUFBTWlCLEtBQUtsQixVQUFVbUIsZUFBZSxDQUFDLElBQUlDLFdBQVc5QjtJQUNwRCxNQUFNRSxNQUFNLE1BQU1PO0lBQ2xCLE1BQU1zQixNQUFNLElBQUlDLGNBQWNDLE1BQU0sQ0FBQ0MsT0FBT1A7SUFDNUMsTUFBTVEsWUFBWSxNQUFNekIsVUFBVVUsTUFBTSxDQUFDZ0IsT0FBTyxDQUFDO1FBQUVDLE1BQU10QztRQUFVNkI7SUFBRyxHQUFHMUIsS0FBSzZCO0lBQzlFLE1BQU1PLE1BQU1oQyxPQUFPUyxNQUFNLENBQUM7UUFBQ1QsT0FBT0MsSUFBSSxDQUFDcUI7UUFBS3RCLE9BQU9DLElBQUksQ0FBQyxJQUFJdUIsV0FBV0s7S0FBWSxFQUFFSSxRQUFRLENBQUM7SUFDOUYsT0FBT0Q7QUFDVDtBQUVPLGVBQWVFLFlBQVlDLE1BQU07SUFDdEMsSUFBSSxDQUFDQSxRQUFRLE9BQU87SUFDcEIsTUFBTS9CLFlBQVlDO0lBQ2xCLDZEQUE2RDtJQUM3RCxJQUFJQztJQUNKLElBQUk7UUFDRkEsTUFBTU4sT0FBT0MsSUFBSSxDQUFDa0MsUUFBUTtJQUM1QixFQUFFLE9BQU07UUFDTixPQUFPQTtJQUNUO0lBQ0EsSUFBSSxDQUFDN0IsT0FBT0EsSUFBSUUsTUFBTSxJQUFJZCxXQUFXO1FBQ25DLDBEQUEwRDtRQUMxRCxPQUFPeUM7SUFDVDtJQUNBLE1BQU1iLEtBQUtoQixJQUFJOEIsUUFBUSxDQUFDLEdBQUcxQztJQUMzQixNQUFNMkMsT0FBTy9CLElBQUk4QixRQUFRLENBQUMxQztJQUMxQixNQUFNRSxNQUFNLE1BQU1PO0lBQ2xCLE1BQU1tQyxXQUFXLE1BQU1sQyxVQUFVVSxNQUFNLENBQUN5QixPQUFPLENBQUM7UUFBRVIsTUFBTXRDO1FBQVU2QjtJQUFHLEdBQUcxQixLQUFLeUM7SUFDN0UsT0FBTyxJQUFJRyxjQUFjQyxNQUFNLENBQUNIO0FBQ2xDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhcnR1cC12YXVsdC8uL2NyeXB0by5qcz8zZjYxIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFFUy0yNTYtR0NNIGVuY3J5cHRpb24gdXNpbmcgV2ViIENyeXB0byAocnVucyBpbiBOb2RlIDE5Ky9tb2Rlcm4gYnJvd3NlcnMpXG4vLyBLZXkgbWF0ZXJpYWwgaXMgZGVyaXZlZCBmcm9tIHByb2Nlc3MuZW52LlNFQ1JFVF9FTkNSWVBUSU9OX0tFWSAoYmFzZTY0IG9yIHV0Zi04KVxuXG5jb25zdCBFTkNfQUxHTyA9ICdBRVMtR0NNJztcbmNvbnN0IElWX0xFTkdUSCA9IDEyOyAvLyA5Ni1iaXQgSVYgZm9yIEdDTVxuXG5mdW5jdGlvbiBnZXRSYXdLZXlCeXRlcygpIHtcbiAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuU0VDUkVUX0VOQ1JZUFRJT05fS0VZIHx8ICdkZXYtaW5zZWN1cmUta2V5LWNoYW5nZS1tZSc7XG4gIHRyeSB7XG4gICAgLy8gdHJ5IGJhc2U2NCBkZWNvZGUgZmlyc3RcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oa2V5LCAnYmFzZTY0Jyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oa2V5LCAndXRmLTgnKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbXBvcnRBZXNLZXkoKSB7XG4gIGNvbnN0IHdlYmNyeXB0byA9IGdldENyeXB0bygpO1xuICBjb25zdCByYXcgPSBnZXRSYXdLZXlCeXRlcygpO1xuICBjb25zdCByYXczMiA9IHJhdy5sZW5ndGggPT09IDMyID8gcmF3IDogQnVmZmVyLmNvbmNhdChbcmF3LCBCdWZmZXIuYWxsb2MoTWF0aC5tYXgoMCwgMzIgLSByYXcubGVuZ3RoKSldKS5zbGljZSgwLDMyKTtcbiAgcmV0dXJuIHdlYmNyeXB0by5zdWJ0bGUuaW1wb3J0S2V5KCdyYXcnLCByYXczMiwgRU5DX0FMR08sIGZhbHNlLCBbJ2VuY3J5cHQnLCAnZGVjcnlwdCddKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q3J5cHRvKCkge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNyeXB0bz8uc3VidGxlKSByZXR1cm4gd2luZG93LmNyeXB0bztcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gIHJldHVybiBnbG9iYWxUaGlzLmNyeXB0byB8fCByZXF1aXJlKCdjcnlwdG8nKS53ZWJjcnlwdG87XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0VGV4dChwbGFpbikge1xuICBpZiAocGxhaW4gPT0gbnVsbCkgcmV0dXJuICcnO1xuICBjb25zdCB3ZWJjcnlwdG8gPSBnZXRDcnlwdG8oKTtcbiAgY29uc3QgaXYgPSB3ZWJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KElWX0xFTkdUSCkpO1xuICBjb25zdCBrZXkgPSBhd2FpdCBpbXBvcnRBZXNLZXkoKTtcbiAgY29uc3QgZW5jID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKFN0cmluZyhwbGFpbikpO1xuICBjb25zdCBjaXBoZXJCdWYgPSBhd2FpdCB3ZWJjcnlwdG8uc3VidGxlLmVuY3J5cHQoeyBuYW1lOiBFTkNfQUxHTywgaXYgfSwga2V5LCBlbmMpO1xuICBjb25zdCBvdXQgPSBCdWZmZXIuY29uY2F0KFtCdWZmZXIuZnJvbShpdiksIEJ1ZmZlci5mcm9tKG5ldyBVaW50OEFycmF5KGNpcGhlckJ1ZikpXSkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVjcnlwdFRleHQoY2lwaGVyKSB7XG4gIGlmICghY2lwaGVyKSByZXR1cm4gJyc7XG4gIGNvbnN0IHdlYmNyeXB0byA9IGdldENyeXB0bygpO1xuICAvLyBUb2xlcmF0ZSBsZWdhY3kgcGxhaW50ZXh0IHZhbHVlcyAobm90IGJhc2U2NCBvciB0b28gc2hvcnQpXG4gIGxldCByYXc7XG4gIHRyeSB7XG4gICAgcmF3ID0gQnVmZmVyLmZyb20oY2lwaGVyLCAnYmFzZTY0Jyk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBjaXBoZXI7XG4gIH1cbiAgaWYgKCFyYXcgfHwgcmF3Lmxlbmd0aCA8PSBJVl9MRU5HVEgpIHtcbiAgICAvLyBOb3QgaW4gZXhwZWN0ZWQgSVZ8fGNpcGhlcnRleHQgZm9ybWF0OyBsaWtlbHkgcGxhaW50ZXh0XG4gICAgcmV0dXJuIGNpcGhlcjtcbiAgfVxuICBjb25zdCBpdiA9IHJhdy5zdWJhcnJheSgwLCBJVl9MRU5HVEgpO1xuICBjb25zdCBkYXRhID0gcmF3LnN1YmFycmF5KElWX0xFTkdUSCk7XG4gIGNvbnN0IGtleSA9IGF3YWl0IGltcG9ydEFlc0tleSgpO1xuICBjb25zdCBwbGFpbkJ1ZiA9IGF3YWl0IHdlYmNyeXB0by5zdWJ0bGUuZGVjcnlwdCh7IG5hbWU6IEVOQ19BTEdPLCBpdiB9LCBrZXksIGRhdGEpO1xuICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKHBsYWluQnVmKTtcbn1cblxuIl0sIm5hbWVzIjpbIkVOQ19BTEdPIiwiSVZfTEVOR1RIIiwiZ2V0UmF3S2V5Qnl0ZXMiLCJrZXkiLCJwcm9jZXNzIiwiZW52IiwiU0VDUkVUX0VOQ1JZUFRJT05fS0VZIiwiQnVmZmVyIiwiZnJvbSIsImUiLCJpbXBvcnRBZXNLZXkiLCJ3ZWJjcnlwdG8iLCJnZXRDcnlwdG8iLCJyYXciLCJyYXczMiIsImxlbmd0aCIsImNvbmNhdCIsImFsbG9jIiwiTWF0aCIsIm1heCIsInNsaWNlIiwic3VidGxlIiwiaW1wb3J0S2V5Iiwid2luZG93IiwiY3J5cHRvIiwiZ2xvYmFsVGhpcyIsInJlcXVpcmUiLCJlbmNyeXB0VGV4dCIsInBsYWluIiwiaXYiLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwiZW5jIiwiVGV4dEVuY29kZXIiLCJlbmNvZGUiLCJTdHJpbmciLCJjaXBoZXJCdWYiLCJlbmNyeXB0IiwibmFtZSIsIm91dCIsInRvU3RyaW5nIiwiZGVjcnlwdFRleHQiLCJjaXBoZXIiLCJzdWJhcnJheSIsImRhdGEiLCJwbGFpbkJ1ZiIsImRlY3J5cHQiLCJUZXh0RGVjb2RlciIsImRlY29kZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./crypto.js\n");

/***/ }),

/***/ "(api)/./lib/supabaseAdmin.js":
/*!******************************!*\
  !*** ./lib/supabaseAdmin.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://oyzcfonabcszhfimzztc.supabase.co\" || 0;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"placeholder-service-key\";\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2VBZG1pbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFFckQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcscUJBQXFCSCxRQUFRQyxHQUFHLENBQUNHLHlCQUF5QixJQUFJO0FBRTdELE1BQU1DLGdCQUFnQlAsbUVBQVlBLENBQUNDLGFBQWFJLG9CQUFvQiIsInNvdXJjZXMiOlsid2VicGFjazovL3N0YXJ0dXAtdmF1bHQvLi9saWIvc3VwYWJhc2VBZG1pbi5qcz82NmYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICdodHRwczovL3BsYWNlaG9sZGVyLnN1cGFiYXNlLmNvJztcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgJ3BsYWNlaG9sZGVyLXNlcnZpY2Uta2V5JztcblxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSk7XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsInN1cGFiYXNlQWRtaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabaseAdmin.js\n");

/***/ }),

/***/ "(api)/./pages/api/share/resolve.js":
/*!************************************!*\
  !*** ./pages/api/share/resolve.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/supabaseAdmin */ \"(api)/./lib/supabaseAdmin.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../crypto */ \"(api)/./crypto.js\");\n\n\n\nfunction timingSafeEqual(a, b) {\n    try {\n        const ba = Buffer.from(a);\n        const bb = Buffer.from(b);\n        if (ba.length !== bb.length) return false;\n        return crypto__WEBPACK_IMPORTED_MODULE_1___default().timingSafeEqual(ba, bb);\n    } catch  {\n        return false;\n    }\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).end();\n    const { token, secret } = req.body || {};\n    if (!token) return res.status(400).json({\n        error: \"token required\"\n    });\n    const ip = req.headers[\"x-forwarded-for\"]?.split(\",\")[0]?.trim() || req.socket?.remoteAddress || null;\n    const userAgent = req.headers[\"user-agent\"] || null;\n    const { data: t } = await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"share_tokens\").select(\"*\").eq(\"token\", token).single().maybeSingle();\n    if (!t) {\n        return res.status(404).json({\n            error: \"not found\"\n        });\n    }\n    if (t.revoked || new Date(t.expires_at) < new Date()) {\n        return res.status(410).json({\n            error: \"expired\"\n        });\n    }\n    if (t.require_secret) {\n        if (!secret) {\n            await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"share_access_logs\").insert([\n                {\n                    share_token_id: t.id,\n                    ip_address: ip,\n                    success: false\n                }\n            ]);\n            return res.status(401).json({\n                error: \"secret required\"\n            });\n        }\n        const salt = Buffer.from(t.secret_key_salt, \"base64\");\n        const hash = crypto__WEBPACK_IMPORTED_MODULE_1___default().scryptSync(secret, salt, 32).toString(\"base64\");\n        const ok = timingSafeEqual(hash, t.secret_key_hash);\n        if (!ok) {\n            await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"share_access_logs\").insert([\n                {\n                    share_token_id: t.id,\n                    ip_address: ip,\n                    success: false\n                }\n            ]);\n            return res.status(403).json({\n                error: \"invalid secret\"\n            });\n        }\n    }\n    const { data: cred } = await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"credentials\").select(\"*\").eq(\"id\", t.credential_id).single().maybeSingle();\n    if (!cred) return res.status(404).json({\n        error: \"credential missing\"\n    });\n    // Fetch tool for context\n    const { data: tool } = await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"tools\").select(\"name, url\").eq(\"id\", cred.tool_id).single().maybeSingle();\n    // increment view count & revoke if one_time\n    await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"share_tokens\").update({\n        views: (t.views || 0) + 1,\n        revoked: t.one_time ? true : t.revoked\n    }).eq(\"id\", t.id);\n    await _lib_supabaseAdmin__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin.from(\"share_access_logs\").insert([\n        {\n            share_token_id: t.id,\n            ip_address: ip,\n            success: true\n        }\n    ]);\n    const username = await (0,_crypto__WEBPACK_IMPORTED_MODULE_2__.decryptText)(cred.encrypted_username);\n    const password = await (0,_crypto__WEBPACK_IMPORTED_MODULE_2__.decryptText)(cred.encrypted_password);\n    return res.json({\n        ok: true,\n        label: cred.label,\n        username,\n        password,\n        toolName: tool?.name || null,\n        toolUrl: tool?.url || null\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVzQixhQUFhLEVBQUVuQixNQUFNLEdBQUdDLFdBQVc7SUFDekgsSUFBSSxDQUFDaUIsTUFBTSxPQUFPdEMsSUFBSUUsTUFBTSxDQUFDLEtBQUtLLElBQUksQ0FBQztRQUFFQyxPQUFPO0lBQXFCO0lBRXJFLHlCQUF5QjtJQUN6QixNQUFNLEVBQUVRLE1BQU13QixJQUFJLEVBQUUsR0FBRyxNQUFNckQsNkRBQWFBLENBQUNRLElBQUksQ0FBQyxTQUFTdUIsTUFBTSxDQUFDLGFBQWFDLEVBQUUsQ0FBQyxNQUFNbUIsS0FBS0csT0FBTyxFQUFFckIsTUFBTSxHQUFHQyxXQUFXO0lBRXhILDRDQUE0QztJQUM1QyxNQUFNbEMsNkRBQWFBLENBQUNRLElBQUksQ0FBQyxnQkFBZ0IrQyxNQUFNLENBQUM7UUFBRUMsT0FBTyxDQUFDMUIsRUFBRTBCLEtBQUssSUFBSSxLQUFLO1FBQUdyQixTQUFTTCxFQUFFMkIsUUFBUSxHQUFHLE9BQU8zQixFQUFFSyxPQUFPO0lBQUMsR0FBR0gsRUFBRSxDQUFDLE1BQU1GLEVBQUVXLEVBQUU7SUFDcEksTUFBTXpDLDZEQUFhQSxDQUFDUSxJQUFJLENBQUMscUJBQXFCK0IsTUFBTSxDQUFDO1FBQUM7WUFBRUMsZ0JBQWdCVixFQUFFVyxFQUFFO1lBQUVDLFlBQVlwQjtZQUFJcUIsU0FBUztRQUFLO0tBQUU7SUFFOUcsTUFBTWUsV0FBVyxNQUFNeEQsb0RBQVdBLENBQUNpRCxLQUFLUSxrQkFBa0I7SUFDMUQsTUFBTUMsV0FBVyxNQUFNMUQsb0RBQVdBLENBQUNpRCxLQUFLVSxrQkFBa0I7SUFDMUQsT0FBT2hELElBQUlPLElBQUksQ0FBQztRQUFFNkIsSUFBSTtRQUFNYSxPQUFPWCxLQUFLVyxLQUFLO1FBQUVKO1FBQVVFO1FBQVVHLFVBQVVWLE1BQU1XLFFBQVE7UUFBTUMsU0FBU1osTUFBTWEsT0FBTztJQUFLO0FBQzlIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhcnR1cC12YXVsdC8uL3BhZ2VzL2FwaS9zaGFyZS9yZXNvbHZlLmpzPzljOWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2VBZG1pbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9zdXBhYmFzZUFkbWluJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmltcG9ydCB7IGRlY3J5cHRUZXh0IH0gZnJvbSAnLi4vLi4vLi4vY3J5cHRvJztcblxuZnVuY3Rpb24gdGltaW5nU2FmZUVxdWFsKGEsIGIpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiYSA9IEJ1ZmZlci5mcm9tKGEpO1xuICAgIGNvbnN0IGJiID0gQnVmZmVyLmZyb20oYik7XG4gICAgaWYgKGJhLmxlbmd0aCAhPT0gYmIubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGNyeXB0by50aW1pbmdTYWZlRXF1YWwoYmEsIGJiKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoKTtcbiAgY29uc3QgeyB0b2tlbiwgc2VjcmV0IH0gPSByZXEuYm9keSB8fCB7fTtcbiAgaWYgKCF0b2tlbikgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICd0b2tlbiByZXF1aXJlZCcgfSk7XG5cbiAgY29uc3QgaXAgPSByZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQtZm9yJ10/LnNwbGl0KCcsJylbMF0/LnRyaW0oKSB8fCByZXEuc29ja2V0Py5yZW1vdGVBZGRyZXNzIHx8IG51bGw7XG4gIGNvbnN0IHVzZXJBZ2VudCA9IHJlcS5oZWFkZXJzWyd1c2VyLWFnZW50J10gfHwgbnVsbDtcblxuICBjb25zdCB7IGRhdGE6IHQgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW4uZnJvbSgnc2hhcmVfdG9rZW5zJykuc2VsZWN0KCcqJykuZXEoJ3Rva2VuJywgdG9rZW4pLnNpbmdsZSgpLm1heWJlU2luZ2xlKCk7XG4gIGlmICghdCkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnbm90IGZvdW5kJyB9KTtcbiAgfVxuICBpZiAodC5yZXZva2VkIHx8IG5ldyBEYXRlKHQuZXhwaXJlc19hdCkgPCBuZXcgRGF0ZSgpKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDEwKS5qc29uKHsgZXJyb3I6ICdleHBpcmVkJyB9KTtcbiAgfVxuICBpZiAodC5yZXF1aXJlX3NlY3JldCkge1xuICAgIGlmICghc2VjcmV0KSB7XG4gICAgICBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oJ3NoYXJlX2FjY2Vzc19sb2dzJykuaW5zZXJ0KFt7IHNoYXJlX3Rva2VuX2lkOiB0LmlkLCBpcF9hZGRyZXNzOiBpcCwgc3VjY2VzczogZmFsc2UgfV0pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdzZWNyZXQgcmVxdWlyZWQnIH0pO1xuICAgIH1cbiAgICBjb25zdCBzYWx0ID0gQnVmZmVyLmZyb20odC5zZWNyZXRfa2V5X3NhbHQsICdiYXNlNjQnKTtcbiAgICBjb25zdCBoYXNoID0gY3J5cHRvLnNjcnlwdFN5bmMoc2VjcmV0LCBzYWx0LCAzMikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIGNvbnN0IG9rID0gdGltaW5nU2FmZUVxdWFsKGhhc2gsIHQuc2VjcmV0X2tleV9oYXNoKTtcbiAgICBpZiAoIW9rKSB7XG4gICAgICBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oJ3NoYXJlX2FjY2Vzc19sb2dzJykuaW5zZXJ0KFt7IHNoYXJlX3Rva2VuX2lkOiB0LmlkLCBpcF9hZGRyZXNzOiBpcCwgc3VjY2VzczogZmFsc2UgfV0pO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdpbnZhbGlkIHNlY3JldCcgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgeyBkYXRhOiBjcmVkIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluLmZyb20oJ2NyZWRlbnRpYWxzJykuc2VsZWN0KCcqJykuZXEoJ2lkJywgdC5jcmVkZW50aWFsX2lkKS5zaW5nbGUoKS5tYXliZVNpbmdsZSgpO1xuICBpZiAoIWNyZWQpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnY3JlZGVudGlhbCBtaXNzaW5nJyB9KTtcblxuICAvLyBGZXRjaCB0b29sIGZvciBjb250ZXh0XG4gIGNvbnN0IHsgZGF0YTogdG9vbCB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5mcm9tKCd0b29scycpLnNlbGVjdCgnbmFtZSwgdXJsJykuZXEoJ2lkJywgY3JlZC50b29sX2lkKS5zaW5nbGUoKS5tYXliZVNpbmdsZSgpO1xuXG4gIC8vIGluY3JlbWVudCB2aWV3IGNvdW50ICYgcmV2b2tlIGlmIG9uZV90aW1lXG4gIGF3YWl0IHN1cGFiYXNlQWRtaW4uZnJvbSgnc2hhcmVfdG9rZW5zJykudXBkYXRlKHsgdmlld3M6ICh0LnZpZXdzIHx8IDApICsgMSwgcmV2b2tlZDogdC5vbmVfdGltZSA/IHRydWUgOiB0LnJldm9rZWQgfSkuZXEoJ2lkJywgdC5pZCk7XG4gIGF3YWl0IHN1cGFiYXNlQWRtaW4uZnJvbSgnc2hhcmVfYWNjZXNzX2xvZ3MnKS5pbnNlcnQoW3sgc2hhcmVfdG9rZW5faWQ6IHQuaWQsIGlwX2FkZHJlc3M6IGlwLCBzdWNjZXNzOiB0cnVlIH1dKTtcblxuICBjb25zdCB1c2VybmFtZSA9IGF3YWl0IGRlY3J5cHRUZXh0KGNyZWQuZW5jcnlwdGVkX3VzZXJuYW1lKTtcbiAgY29uc3QgcGFzc3dvcmQgPSBhd2FpdCBkZWNyeXB0VGV4dChjcmVkLmVuY3J5cHRlZF9wYXNzd29yZCk7XG4gIHJldHVybiByZXMuanNvbih7IG9rOiB0cnVlLCBsYWJlbDogY3JlZC5sYWJlbCwgdXNlcm5hbWUsIHBhc3N3b3JkLCB0b29sTmFtZTogdG9vbD8ubmFtZSB8fCBudWxsLCB0b29sVXJsOiB0b29sPy51cmwgfHwgbnVsbCB9KTtcbn1cblxuXG4iXSwibmFtZXMiOlsic3VwYWJhc2VBZG1pbiIsImNyeXB0byIsImRlY3J5cHRUZXh0IiwidGltaW5nU2FmZUVxdWFsIiwiYSIsImIiLCJiYSIsIkJ1ZmZlciIsImZyb20iLCJiYiIsImxlbmd0aCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJ0b2tlbiIsInNlY3JldCIsImJvZHkiLCJqc29uIiwiZXJyb3IiLCJpcCIsImhlYWRlcnMiLCJzcGxpdCIsInRyaW0iLCJzb2NrZXQiLCJyZW1vdGVBZGRyZXNzIiwidXNlckFnZW50IiwiZGF0YSIsInQiLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsIm1heWJlU2luZ2xlIiwicmV2b2tlZCIsIkRhdGUiLCJleHBpcmVzX2F0IiwicmVxdWlyZV9zZWNyZXQiLCJpbnNlcnQiLCJzaGFyZV90b2tlbl9pZCIsImlkIiwiaXBfYWRkcmVzcyIsInN1Y2Nlc3MiLCJzYWx0Iiwic2VjcmV0X2tleV9zYWx0IiwiaGFzaCIsInNjcnlwdFN5bmMiLCJ0b1N0cmluZyIsIm9rIiwic2VjcmV0X2tleV9oYXNoIiwiY3JlZCIsImNyZWRlbnRpYWxfaWQiLCJ0b29sIiwidG9vbF9pZCIsInVwZGF0ZSIsInZpZXdzIiwib25lX3RpbWUiLCJ1c2VybmFtZSIsImVuY3J5cHRlZF91c2VybmFtZSIsInBhc3N3b3JkIiwiZW5jcnlwdGVkX3Bhc3N3b3JkIiwibGFiZWwiLCJ0b29sTmFtZSIsIm5hbWUiLCJ0b29sVXJsIiwidXJsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/share/resolve.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fshare%2Fresolve&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fshare%2Fresolve.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();